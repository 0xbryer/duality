version: 1
name: duality-devnet
task_definition:
  task_execution_role: ecsTaskExecutionRole
  task_role_arn: ecsTaskExecutionRole
  ecs_network_mode: bridge
  task_size:
    cpu_limit: 2048
    mem_limit: 16GB
  services:

    genesis-node-launcher:
      essential: false

    genesis-node:
      cpu_shares: 1024
      mem_limit: 8GB
      depends_on:
        - container_name: genesis-node-launcher
          condition: SUCCESS
      essential: true

    follower-node-launcher:
      essential: false
      depends_on:
        - container_name: genesis-node
          condition: HEALTHY

    follower-node:
      cpu_shares: 1024
      mem_limit: 8GB
      depends_on:
        - container_name: follower-node-launcher
          condition: SUCCESS


run_params:
  network_configuration:
    awsvpc_configuration:
      subnets:
        - subnet-071da78b06d4e0eb1 
      security_groups:
        - sg-040c7c77456e351bf
      assign_public_ip: ENABLED
  service_discovery:
     private_dns_namespace:
      name: devnet              
      vpc: vpc-013e79af9077c1e0e
      description: Namspace for ecs devnet-cluster
